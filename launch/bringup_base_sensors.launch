<launch>
    <arg name="robot" default="rosbot" />

    <arg name="tf_prefix" default="$(env ROS_NAMESPACE)"/>
    <param name="tf_prefix" value="$(arg tf_prefix)" />

    <!-- <node pkg="rosbot_ekf" type="msgs_conversion" name="msgs_conversion" respawn="true">
        <param name="tf_prefix" type="string" value="$(env ROS_NAMESPACE)" />
    </node> -->

    <group if="$(eval arg('robot') == 'scoutmini')">
        <include file="$(find scout_bringup)/launch/scout_minimal.launch"/>
<!--            included the scout_description-->
        <include file="$(find scout_bringup)/launch/open_rslidar.launch"/>
        <include file="$(find realsense2_camera)/launch/rs_camera.launch"/>
<!--        <node pkg="tf" type="static_transform_publisher" name="imu_publisher"-->
<!--              args="0 0 0.02 0 0 0 base_link imu_publisher 100" />-->
    </group>
    <group if="$(eval arg('robot') == 'rosbot')">
        <arg name="rosbot_pro" default="true" />

        <!-- <param name="robot_description"
               command="cat $(find rosbot_description)/urdf/rosbot.xacro"/>
        <node pkg="robot_state_publisher" type="robot_state_publisher" name="robot_state_publisher"/> -->

        <include file="$(find rosbot_ekf)/launch/all.launch" pass_all_args="true"/>
        <!-- <include file="$(find rplidar_ros)/launch/rplidar_a3.launch"/>
        <include file="$(find astra_camera)/launch/astra.launch"/> -->

        <node pkg="tf" type="static_transform_publisher" name="laser_broadcaster"
              args="0.02 0 0.0915 3.14 0 0 $(arg tf_prefix)/base_link $(arg tf_prefix)/laser 100"/>
        <node pkg="tf" type="static_transform_publisher" name="camera_broadcaster"
              args="-0.0062 0 0.159 0 0 0 $(arg tf_prefix)/base_link $(arg tf_prefix)/camera_link 100"/>
        <node pkg="tf" type="static_transform_publisher" name="range_broadcaster_fl"
              args="0.0985 0.068 0 0 0 0 $(arg tf_prefix)/base_link $(arg tf_prefix)/range_fl 100"/>
        <node pkg="tf" type="static_transform_publisher" name="range_broadcaster_fr"
              args="0.0985 -0.068 0 0 0 0 $(arg tf_prefix)/base_link $(arg tf_prefix)/range_fr 100"/>
        <node pkg="tf" type="static_transform_publisher" name="range_broadcaster_rl"
              args="-0.0985 0.068 0 3.14 0 0 $(arg tf_prefix)/base_link $(arg tf_prefix)/range_rl 100"/>
        <node pkg="tf" type="static_transform_publisher" name="range_broadcaster_rr"
              args="-0.0985 -0.068 0 3.14 0 0 $(arg tf_prefix)/base_link $(arg tf_prefix)/range_rr 100"/>

        <include file="$(find rosbot_description)/launch/rosbot_hardware.launch"/>
    </group>
</launch>